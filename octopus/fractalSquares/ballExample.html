<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="styles/style.css" media="screen" title="no title" charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <title>Fancy Canvas</title>
  </head>
  <body>
    <canvas id="canvas" width="600" height="600">
    </canvas>
    <script type="text/javascript">
      //returns a random number between 0 and 600
      function randNumberSixHundo() {
        return Math.floor(Math.random() * 600);
      }
      function randNumberTwoFiftyFive() {
        return Math.floor(Math.random() * 255);
      }
      //return a randomRGBA
      function returnRandomRGBA() {
        return 'rgba('+randNumberTwoFiftyFive()+','+randNumberTwoFiftyFive()+
        ','+randNumberTwoFiftyFive()+','+Math.random()+')';
      }
      //set up canvas
      var canvas = document.getElementById('canvas');
      var context = canvas.getContext('2d');
      //make a rectange
      // context.fillStyle = "rgba(200, 250, 200, 0.7)"
      // context.fillRect(50,25,40,100);
      //
      // //make a line
      // context.beginPath();
      // context.moveTo(100,100);
      // context.lineTo(600,68);
      // context.strokeStyle = 'orange'
      // context.stroke();

      //draw 600 random lines
      // for (var i = 0; i < 600; i++){
      //   context.fillStyle = returnRandomRGBA();
      //   context.beginPath();
      //   //context.lineWidth = 4;
      //   context.arc(randNumberSixHundo(), randNumberSixHundo(), randNumberSixHundo(), 0, Math.PI*2, true);
      //   //context.lineTo(randNumberSixHundo(),randNumberSixHundo());
      //   context.closePath();
      //   context.fill();
      //   //context.strokeStyle = returnRandomRGBA();
      //   //context.stroke();
      // }
      var x = 40;
      var y = 40;
      var r = 40;
      var dx = 5;
      var dy = 4;
      var rightDown = false;
      var leftDown = false;
      function onKeyDown(evt) {
        if (evt.keyCode == 39) rightDown = true;
        else if (evt.keyCode == 37) leftDown = true;
      }
      function onKeyUp(evt) {
        if (evt.keyCode == 39) rightDown = false;
        else if (evt.keyCode == 37) leftDown = false;
      }

      $(document).keydown(onKeyDown);
      $(document).keyup(onKeyUp);

      function init_paddle() {
        paddlex = 200;
        paddleh = 10;
        paddlew = 75;
      }
      function drawCircles() {
        //context.clearRect(0,0,600,600);
        context.fillStyle = returnRandomRGBA();
        if (rightDown) paddlex += 5;
        else if (leftDown) paddlex -= 5;
        context.fillRect(paddlex,600-paddleh,paddlew,paddleh);
        context.beginPath();
        context.arc(x, y, r, 0, Math.PI*2, true);
        context.closePath();
        context.fill();

        if (x + dx > 600 || x + dx < 0){
          dx = -(dx+5);
        }
        else if (y + dy < 0){
          dy = -(dy+5);
        }
        else if (y + dy > 600-paddleh) {
          if (x > paddlex && x < paddlex + paddlew){
            dy = -(dy+5);
          }
          else if (y +dy > 600) {
            dy = -(dy+5);
          }
          else //dy = -dy;
            //game over, so stop the animation
            clearInterval(intervalId);
        }
        x += dx;
        y += dy;
      }
      function init() {
        return setInterval(drawCircles,10);
      }
      init_paddle();
      init();

    </script>
  </body>
</html>
